<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
    <title>Document</title>
</head>
<body>

    <div id= "BoxWithButtons">
           
            <div class = "whiteButton" id="a" ></div>
            <div class = "whiteButton" ></div>
            <div class = "whiteButton" ></div>
            <div class = "whiteButton" ></div>
            <div class = "whiteButton" ></div>
            <div class = "whiteButton" ></div>
            <div class = "whiteButton" ></div>
            <div class = "whiteButton" ></div>
            <div class = "whiteButton" ></div>
    </div>
    
    Record<input type="checkbox" value = "Record" id = "_record">
    Record<input type="checkbox" value = "Record" id = "_record1">
    <input type="submit" value = "Play" id = "_play">

  
   <script>
    //tablica dzwieków
    const Sound =  [new Audio("Sound/boom.wav"),new Audio("Sound/clap.wav"),new Audio("Sound/snare.wav"),new Audio("Sound/tink.wav"),new Audio("Sound/ride.wav")]; 
    Sound[0].currentTime = 0;
    Sound[1].currentTime = 0;
    Sound[2].currentTime = 0;
    Sound[3].currentTime = 0;
    Sound[4].currentTime = 0;
    
    
    let record = document.querySelector("#_record");
    let record1 = document.querySelector("#_record1");
    let play = document.querySelector("#_play");

    //zmienne odpowiedzialne za czas 
    let time;
    let path1 = [];
    let path2 = [];
    //
    record.addEventListener( 'change', function() {
    if(this.checked) {
        d = new Date();
        time = d.getTime();
        tab = [];
        
    }
    });
    record1.addEventListener( 'change', function() {
    if(this.checked) {
        d = new Date();
        time = d.getTime();
        tab = new Array();
        
    }
    });

    
    play.addEventListener('click' ,  function(){
        SoundReader(path1);
        SoundReader(path2);
    });
  
    //Reagowanie na przycisk 
    document.body.addEventListener('keypress', (e) =>
    {  
        soundPlay(e.charCode);
        if(document.querySelector("#_record").checked == true)
        path1 = RecordPath(e.charCode);
        if(document.querySelector("#_record1").checked == true)
        path2 = RecordPath(e.charCode);
        
    })



    // Funkcja zapisu scieżki dzwiękowej
    function RecordPath(_charCode)
        {
            // zmienna odpowiedzialna za czas 
            d = new Date();
            
            
             
            //console.log(document.querySelector("#_record").checked );
           
               
                tab.push(d.getTime() - time , _charCode);
                //console.log( d.getTime() - time);
                return tab;
                
            
          
           
           
           
        }

    // Funkcja odczytująca  scieżke dzwiękową
    function SoundReader(tab)
    {
       
        for(let a = 0 ; a< tab.length ; a+=2) 
               {
                setTimeout(function(){soundPlay(tab[a+1])} , tab[a] );
               }
       
    }

    //fukcja otwarzająca odpowiedni dzwiek
    function soundPlay(_charCode )
    {
        
        switch(_charCode)
        {
            case 113: Sound[0].play();
            break;
            case 119: Sound[1].play();
            break;
            case 101: Sound[2].play();
            break;
            case 114: Sound[3].play();
            break;
            case 97: Sound[4].play();
            break;
            
        }
    }

    </script>
</body>
</html>